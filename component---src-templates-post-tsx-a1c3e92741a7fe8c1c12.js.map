{"version":3,"sources":["webpack://my-blog/./src/templates/ImageViewer.tsx","webpack://my-blog/./src/templates/Post.tsx"],"names":["Wrapper","styled","ImageViewer","src","onClose","style","backgroundImage","onClick","PostContent","PostPage","contentRef","state","imgSrc","undefined","componentDidMount","this","imgs","getElementsByTagName","i","img","hash","split","includes","onclick","setState","width","cursor","display","margin","length","render","props","pageContext","prev","next","post","data","markdownRemark","postPath","fields","slug","postNode","postSEO","Helmet","title","frontmatter","config","banner","Link","to","light","date","timeToRead","kebabCase","category","dangerouslySetInnerHTML","__html","html","ref","tags","map","tag","key","React"],"mappings":"oOAGMA,EAAUC,oBAAH,gEAAGA,CAAH,iMAaN,SAASC,EAAT,GAAwC,IAAjBC,EAAgB,EAAhBA,IAAKC,EAAW,EAAXA,QACjC,OAAKD,EAGE,gBAACH,EAAD,CAASK,MAAO,CAAEC,gBAAgB,OAAQH,EAAT,KAAmBI,QAASH,IAF3D,K,cCLLI,EAAcP,oBAAH,4DAAGA,CAAH,sBAWIQ,E,oJACnBC,WAAiC,K,EAEjCC,MAAQ,CACNC,YAAQC,G,0CAEVC,kBAAA,WAAqB,IAAD,OAClB,GAAIC,KAAKL,WAGP,IAFA,IAAIM,EAAOD,KAAKL,WAAYO,qBAAqB,QAAU,GADxC,WAGVC,GACP,IAAIC,EAAMH,EAAKE,GACXE,EAAOD,EAAIhB,IAAIkB,MAAM,KAAK,GAC9B,GAAID,GAAQA,EAAKE,SAAS,aACxB,iBAEFH,EAAII,QAAU,kBAAM,EAAKC,SAAS,CAAEZ,OAAQO,EAAIhB,OAChDgB,EAAIM,MAAQ,IACZN,EAAId,MAAMqB,OAAS,UACnBP,EAAId,MAAMsB,QAAU,QACpBR,EAAId,MAAMuB,OAAS,QAVZV,EAAI,EAAGA,EAAIF,EAAKa,OAAQX,IAAK,EAA7BA,I,EAebY,OAAA,WAAU,IAAD,OACP,EAAuBf,KAAKgB,MAAMC,YAA1BC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,KACRC,EAAOpB,KAAKgB,MAAMK,KAAKC,eACvBzB,EAAWG,KAAKJ,MAAhBC,OACN,OACE,gBAAC,KAAD,KACGuB,EACC,gCACE,gBAAC,KAAD,CAAKG,SAAUH,EAAKI,OAAOC,KAAMC,SAAUN,EAAMO,SAAO,IACxD,gBAACC,EAAA,EAAD,CAAQC,MAAUT,EAAKU,YAAYD,MAAtB,MAAiCE,gBAC9C,gBAAC,KAAD,CAAQC,OAAQZ,EAAKU,YAAYE,QAC/B,gBAACC,EAAA,EAAD,CAAMC,GAAG,KAAKH,eACd,gBAAC,KAAD,KAAeX,EAAKU,YAAYD,OAChC,gBAAC,KAAD,CAASM,OAAO,GACbf,EAAKU,YAAYM,KADpB,MACmChB,EAAKiB,WADxC,iBACwE,IACtE,gBAACJ,EAAA,EAAD,CAAMC,GAAE,eAAiBI,IAAUlB,EAAKU,YAAYS,WAAcnB,EAAKU,YAAYS,YAGvF,gBAAC,KAAD,KACE,gBAAC,KAAD,KACE,gBAAC9C,EAAD,CAAa+C,wBAAyB,CAAEC,OAAQrB,EAAKsB,MAAQC,IAAK,SAAAA,GAAG,OAAK,EAAKhD,WAAagD,KAC5F,gBAACxD,EAAD,CAAaC,IAAKS,EAAQR,QAAS,kBAAM,EAAKoB,SAAS,CAAEZ,YAAQC,OAChEsB,EAAKU,YAAYc,KAChB,gBAAC,KAAD,eAEGxB,EAAKU,YAAYc,KAAKC,KAAI,SAACC,EAAK3C,GAAN,OACzB,gBAAC8B,EAAA,EAAD,CAAMc,IAAK5C,EAAG+B,GAAE,SAAWI,IAAUQ,IACnC,8BAASA,GADX,IAC0B3C,EAAIiB,EAAKU,YAAYc,KAAK9B,OAAS,EAAnC,aAI5B,KACJ,gBAAC,KAAD,CAAUI,KAAMA,EAAMC,KAAMA,OAIhC,O,GA7D0B6B","file":"component---src-templates-post-tsx-a1c3e92741a7fe8c1c12.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center center;\n  cursor: pointer;\n`\n\nexport function ImageViewer({ src, onClose }) {\n  if (!src) {\n    return null\n  }\n  return <Wrapper style={{ backgroundImage: `url(${src})` }} onClick={onClose} />\n}\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport { graphql } from 'gatsby'\nimport styled from 'styled-components'\nimport kebabCase from 'lodash/kebabCase'\nimport { Layout, Wrapper, Header, Subline, SEO, PrevNext, SectionTitle, Content } from '../components'\nimport config from '../../config/SiteConfig'\nimport '../utils/prismjs-theme.css'\nimport PathContext from '../models/PathContext'\nimport Post from '../models/Post'\nimport { ImageViewer } from './ImageViewer'\nimport { Link } from '../components/Link'\n\nconst PostContent = styled.div`\n  margin-top: 4rem;\n`\n\ninterface Props {\n  data: {\n    markdownRemark: Post,\n  }\n  pageContext: PathContext\n}\n\nexport default class PostPage extends React.PureComponent<Props> {\n  contentRef: HTMLElement | null = null\n\n  state = {\n    imgSrc: undefined,\n  }\n  componentDidMount() {\n    if (this.contentRef) {\n      let imgs = this.contentRef!.getElementsByTagName('img') || []\n      // tslint:disable-next-line:prefer-for-of\n      for (let i = 0; i < imgs.length; i++) {\n        let img = imgs[i]\n        let hash = img.src.split('#')[1]\n        if (hash && hash.includes('nopreview')) {\n          continue\n        }\n        img.onclick = () => this.setState({ imgSrc: img.src })\n        img.width = 400\n        img.style.cursor = 'pointer'\n        img.style.display = 'block'\n        img.style.margin = 'auto'\n      }\n    }\n  }\n\n  render() {\n    const { prev, next } = this.props.pageContext\n    const post = this.props.data.markdownRemark\n    let { imgSrc } = this.state\n    return (\n      <Layout>\n        {post ? (\n          <>\n            <SEO postPath={post.fields.slug} postNode={post} postSEO />\n            <Helmet title={`${post.frontmatter.title} | ${config.siteTitle}`} />\n            <Header banner={post.frontmatter.banner}>\n              <Link to=\"/\">{config.siteTitle}</Link>\n              <SectionTitle>{post.frontmatter.title}</SectionTitle>\n              <Subline light={true}>\n                {post.frontmatter.date} &mdash; {post.timeToRead} Min Read &mdash; In{' '}\n                <Link to={`/categories/${kebabCase(post.frontmatter.category)}`}>{post.frontmatter.category}</Link>\n              </Subline>\n            </Header>\n            <Wrapper>\n              <Content>\n                <PostContent dangerouslySetInnerHTML={{ __html: post.html }} ref={ref => (this.contentRef = ref)} />\n                <ImageViewer src={imgSrc} onClose={() => this.setState({ imgSrc: undefined })} />\n                {post.frontmatter.tags ? (\n                  <Subline>\n                    Tags: &#160;\n                    {post.frontmatter.tags.map((tag, i) => (\n                      <Link key={i} to={`/tags/${kebabCase(tag)}`}>\n                        <strong>{tag}</strong> {i < post.frontmatter.tags.length - 1 ? `, ` : ``}\n                      </Link>\n                    ))}\n                  </Subline>\n                ) : null}\n                <PrevNext prev={prev} next={next} />\n              </Content>\n            </Wrapper>\n          </>\n        ) : null}\n      </Layout>\n    )\n  }\n}\n\nexport const postQuery = graphql`\n  query($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n        date(formatString: \"DD.MM.YYYY\")\n        category\n        tags\n        banner\n      }\n      timeToRead\n    }\n  }\n`\n"],"sourceRoot":""}