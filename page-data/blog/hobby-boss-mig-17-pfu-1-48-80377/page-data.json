{"componentChunkName":"component---src-templates-post-tsx","path":"/blog/hobby-boss-mig-17-pfu-1-48-80377","webpackCompilationHash":"4e3c0545dd6191cd3daf","result":{"data":{"markdownRemark":{"html":"<p>头部进气这一类型的第一架作品， 也是我第二架全金属色的模型。</p>\n<h3 id=\"overview-810\"><a href=\"#overview-810\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview (8/10)</h3>\n<p><img src=\"/assets/image/mig17/box.jpg\" alt=\"box\"></p>\n<p>组合度也就号手的正常水平，没有特别糟心的地方。细节只能说凑合，驾驶舱里的东西给的有点少，安全带都没有。铆钉也不多，机翼上一大片空白看着很难受，不过这也方便了自己发挥。组装比较简单，整个拼装过程都没花费太多时间。不过给高分的原因主要是便宜：48比例的只要68元。</p>\n<h3 id=\"制作\"><a href=\"#%E5%88%B6%E4%BD%9C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>制作</h3>\n<p>正如前面所说的，组装比较简单，水贴也就那么几个。所以真的没什么好讲。这一时期的照相机处于比较尴尬的发展阶段，所以找不到太多可以参考的照片，也就不必那么讲究了。现代的高清照片又展示的是缺乏保养，表面暗哑的状态，就像1个月后在俄罗斯Monino空军博物馆看到的这张照片。另外的一个主要目的是，在全金属漆面上尝试光油的效果。结论是，表面看起来金属光泽是得到了增强，但达不到镜面效果。果然这个还是得靠高端金属漆。要说是否真实/好看？见仁见智了，不加光油也有独特的味道。</p>\n<p><img src=\"/assets/image/mig17/fudan-j5.jpg\" alt=\"box\"></p>\n<p>复旦的歼教五</p>\n<p><img src=\"/assets/image/mig17/monino-mig17.jpg\" alt=\"box\"></p>\n<p>莫尼诺的同款mig-17， 导弹还都在不知道是不是真的</p>\n<h3 id=\"成品\"><a href=\"#%E6%88%90%E5%93%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>成品</h3>\n<p><img src=\"/assets/image/mig17/1.jpg\" alt=\"1\">\n<img src=\"/assets/image/mig17/2.jpg\" alt=\"2\">\n<img src=\"/assets/image/mig17/3.jpg\" alt=\"3\">\n<img src=\"/assets/image/mig17/4.jpg\" alt=\"4\">\n<img src=\"/assets/image/mig17/5.jpg\" alt=\"5\">\n<img src=\"/assets/image/mig17/6.jpg\" alt=\"6\">\n<img src=\"/assets/image/mig17/7.jpg\" alt=\"7\"></p>\n<h3 id=\"后话\"><a href=\"#%E5%90%8E%E8%AF%9D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>后话</h3>\n<p>苏联第一款取消机炮，装备雷达制导导弹的喷气机打卡完毕。下一架：红箭表演队的Hawk T1.</p>","fields":{"slug":"hobby-boss-mig-17-pfu-1-48-80377"},"frontmatter":{"title":"HobbyBoss Mig-17PFU 1:48 (80377)","date":"15.09.2019","category":"ScaleModel","tags":["飞机","现代","苏","1:48"],"banner":"/assets/image/mig17/5.jpg"},"timeToRead":1}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"hobby-boss-mig-17-pfu-1-48-80377","prev":{"excerpt":"最近在把前面做的几个视(wan)觉(piao)向的代码迁出到新的 repo , 并添加了一些新的效果. 除了巩固了一下 Canvas API 和高中三角函数知识外, 还是学到了若干 Tricks. 其中一个是 Canvas 的尾迹效果, 或者说淡出(fade out)效果. 如果独立思考的话, 首先想到的方法大概是: 缓存上一帧 Canvas 在渲染当前帧之前, 先把缓存帧加一个 alpha 值并绘制在 Canvas 上 继续当前帧所有元素的绘制 但这个方法的问题是, Canvas…","html":"<p>最近在把前面做的几个视(wan)觉(piao)向的代码迁出到新的<a href=\"https://github.com/noru/visual-effects\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a>, 并添加了一些新的效果. 除了巩固了一下 Canvas API 和高中三角函数知识外, 还是学到了若干 Tricks. 其中一个是 Canvas 的尾迹效果, 或者说淡出(fade out)效果.</p>\n<p><img src=\"/assets/image/canvas-trails.png\" alt=\"example\"></p>\n<hr>\n<p>如果独立思考的话, 首先想到的方法大概是:</p>\n<ul>\n<li>缓存上一帧 Canvas</li>\n<li>在渲染当前帧之前, 先把缓存帧加一个 alpha 值并绘制在 Canvas 上</li>\n<li>继续当前帧所有元素的绘制</li>\n</ul>\n<p>但这个方法的问题是, Canvas 的<code class=\"language-text\">Context</code>并没有类似接口可以利用. 本以为<code class=\"language-text\">globalAlpha</code>可以做到类似效果, 但其实这并不能影响已绘像素. 所以不免要用到<code class=\"language-text\">getImageData</code>.</p>\n<p>再继续深入下去之前, 发现前人解决方法竟是非常简单:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Draw a \"chiffon\" over the whole canvas to create the trail effect</span>\n  context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'rgba(255, 255, 255, .05)'</span> <span class=\"token comment\">// using background color with an alpha</span>\n  context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// Draw things as usually...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>翻译: 在绘制每一帧之前, 施加一层带透明度的背景色, 来模拟过去帧的淡出效果.</p>\n<p>除了无法分区和需要事先知道背景色之外, 似乎这是个聪明无破绽的方法. 但实际上海有个很大问题: <strong>轨迹会停留在一个接近背景色的颜色上, 但不会完全变为背景色.</strong></p>\n<p><img src=\"/assets/image/water-stain.png\" alt=\"water-stain\"></p>\n<p>经过一番调查, 这篇<a href=\"http://rectangleworld.com/blog/archives/214\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Blog</a>很好的解释了的可能的原因: alpha 值再由浮点数转为 0-255 的整数时, 由于采用了类似<code class=\"language-text\">Math.ceil</code>的向上取整, 会导致停留在一个整数上, 例如:</p>\n<p><code class=\"language-text\">5 * 0.9 -&gt; 4.5(5) * 0.9 -&gt; 4.5(5) * 0.9...</code></p>\n<p>另外一个证据就是, 使用开头提到的多层 Canvas + globalAlpha 的方法, 也会出现一样的效果. 并且指出 Chrome 的早期版本, 区别于 IE 和 Firefox, 是可以完全淡出的. 至于后面为什么又改回来了, 不排除是故意而为之.</p>\n<hr>\n<h3 id=\"那么有没有\"><a href=\"#%E9%82%A3%E4%B9%88%E6%9C%89%E6%B2%A1%E6%9C%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>那么有没有...</h3>\n<p><strong>有!</strong></p>\n<p>单单要想解决这一个残影问题, 方法还是有的:</p>\n<ul>\n<li>在不改变透明覆盖层颜色的情况下, 把背景色调整为与残影颜色一致即可. <a href=\"https://blog.xiuz.hu/visual-effects\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">例子</a>中就采用了这种简单粗暴的办法.</li>\n<li>使用真\"轨迹\", 记录元素的\"过去\"M 帧的状态, 当做正常帧来绘制. 好处是可以仅为需要施加效果的元素做处理. 坏处是时间复杂度 O(元素个数) -> O(元素个数*淡出所需帧数). 并且复杂情况下缓存的数据可能不止位置信息, 空间复杂度上升同样需要注意. <a href=\"https://www.kirupa.com/canvas/creating_motion_trails.htm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">这篇 Blog</a>介绍了一个简单的例子.</li>\n<li>使用<code class=\"language-text\">getImageData</code>, 用整形操作 alpha 值. 但如此即抛弃了 GPU 加速的可能, 立刻提升 CPU 负载.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> lastFrame <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getImageData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> lastFrame<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pixelData<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-=</span> <span class=\"token number\">3</span> <span class=\"token comment\">// &lt;- no rounding problem</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"总结\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<p>以上各种方法, 还说得过去, 可以根据实际情况选择使用. 看上去完美的 Canvas 拖尾淡出效果目前还不存在. 也许这应该是 WebGL 的领域, Canvas 并不是非常关心类似的操作, 也不大可能期待未来有接口上的动作.</p>","id":"bd366377-611e-5def-898b-5fcff05bac0b","fields":{"slug":"canvas拖尾效果-trails-effect"},"frontmatter":{"date":"2019-08-29","title":"Canvas拖尾效果(Trails Effect)","category":"Code","tags":["canvas","animation","web","js"],"banner":"/assets/image/canvas-trails.png"},"timeToRead":2},"next":null}}}